language: python

python:
  - "3.6"
  - "3.7"

services:
  - postgresql

env:
  - FINDIT_PROJECT_MODE=test_mode TEST_DATABASE_URL=postgres://postgres:@localhost:5432/testdb

before_script:
  - psql -c "CREATE DATABASE testdb;" -U postgres

install:
  - pip install -r requirements.txt

script:
  - python db_setup.py testdb # set up test database
  - pytest --cov=app

after_success:
  - coveralls
